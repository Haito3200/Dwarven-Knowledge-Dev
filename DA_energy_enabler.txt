
custom_button = {
	name = DA_mechanics_infrastructure_upgrade_2_2
	tooltip = DA_mechanics_infrastructure_upgrade_2_2.tt
	potential = {
        always = yes
	}
	trigger = {
        DA_completed.Mechanics_2 = yes
        DA_has_mechanics_inno_points_2 = yes
        custom_trigger_tooltip = {
            tooltip = DA_mechanics_upgrade_already_unlocked_tt
            NOT = {
                has_country_flag = DA_mechanics_upgrade.cables_2.flag
            }
        }
	}
	effect = {
        DA_spend_mechanics_inno_points_2 = yes
        custom_tooltip = DA_mechanics_upgrade.cables_2.tt
        tooltip = {
            remove_province_modifier = DA_mechanics_upgrade.cables_1
            add_permanent_province_modifier = {
                name = DA_mechanics_upgrade.cables_2
                duration = -1
            }
        }
        set_country_flag = DA_mechanics_upgrade.cables_2.flag
        hidden_effect = {
            every_owned_province = {
                limit = {
                    OR = {
                        has_building = DA_steam_pipes
                        has_building = DA_electricity_cables
                    }
                }
                remove_province_modifier = DA_mechanics_upgrade.cables_1
                add_permanent_province_modifier = {
                    name = DA_mechanics_upgrade.cables_2
                    duration = -1
                }
            }
        }
	}
}
custom_button = {
	name = DA_mechanics_infrastructure_upgrade_2_3
	tooltip = DA_mechanics_infrastructure_upgrade_2_3.tt
	potential = {
        always = yes
	}
	trigger = {
        custom_trigger_tooltip = {
            tooltip = DA_completed_previous_mechanics_upgrade_tt
            has_country_flag = DA_mechanics_upgrade.cables_2.flag
        }
        DA_completed.Mechanics_3 = yes
        DA_has_mechanics_inno_points_3 = yes
        custom_trigger_tooltip = {
            tooltip = DA_mechanics_upgrade_already_unlocked_tt
            NOT = {
                has_country_flag = DA_mechanics_upgrade.cables_3.flag
            }
        }
	}
	effect = {
        DA_spend_mechanics_inno_points_3 = yes
        custom_tooltip = DA_mechanics_upgrade.cables_3.tt
        tooltip = {
            remove_province_modifier = DA_mechanics_upgrade.cables_2
            add_permanent_province_modifier = {
                name = DA_mechanics_upgrade.cables_3
                duration = -1
            }
        }
        set_country_flag = DA_mechanics_upgrade.cables_3.flag
        hidden_effect = {
            every_owned_province = {
                limit = {
                    OR = {
                        has_building = DA_steam_pipes
                        has_building = DA_electricity_cables
                    }
                }
                remove_province_modifier = DA_mechanics_upgrade.cables_2
                add_permanent_province_modifier = {
                    name = DA_mechanics_upgrade.cables_3
                    duration = -1
                }
            }
        }
	}
}